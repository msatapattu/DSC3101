{
  "hash": "0d31d75f532bc931115abc783d9041c4",
  "result": {
    "markdown": "---\ntitle: \"Learn Quarto\"\nauthor: \"Pushpakanthie Wijekoon\"\naffiliation: \"Department of Statistics & Computer Science, University of\"\n   \nformat:  \n  html: \n   code-fold: true\n   toc: true\n   theme: beige\ntoc-location: left\ntitle-block-banner: true\nnumber-sections: true\neditor: visual\n---\n\n\n## Bivariate graphs\n\nBivariate graphs display the relationship between two variables. The type of graph will depend on the measurement level of the variables (categorical or quantitative).\n\n### Categorical vs. Categorical graphs\n\nWhen plotting the relationship between two categorical variables, stacked, grouped, or segmented bar charts are typically used. A less common approach is the mosaic chart.\n\n**Example**\n\nThe mpg dataset from the ggplot2 package, contains fuel economy data for 38 popular models of car, for the years 1999 and 2008. Plot the relationship between automobile class and drive type (front-wheel, rear-wheel, or 4-wheel drive) for the automobiles.\n\n#### Access data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\ndata(mpg, package=\"ggplot2\")\nlibrary(dplyr)\nhead(mpg)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 11\n  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class \n  <chr>        <chr> <dbl> <int> <int> <chr>      <chr> <int> <int> <chr> <chr> \n1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa~\n2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa~\n3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa~\n4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa~\n5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa~\n6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa~\n```\n:::\n\n```{.r .cell-code}\nglimpse(mpg)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 234\nColumns: 11\n$ manufacturer <chr> \"audi\", \"audi\", \"audi\", \"audi\", \"audi\", \"audi\", \"audi\", \"~\n$ model        <chr> \"a4\", \"a4\", \"a4\", \"a4\", \"a4\", \"a4\", \"a4\", \"a4 quattro\", \"~\n$ displ        <dbl> 1.8, 1.8, 2.0, 2.0, 2.8, 2.8, 3.1, 1.8, 1.8, 2.0, 2.0, 2.~\n$ year         <int> 1999, 1999, 2008, 2008, 1999, 1999, 2008, 1999, 1999, 200~\n$ cyl          <int> 4, 4, 4, 4, 6, 6, 6, 4, 4, 4, 4, 6, 6, 6, 6, 6, 6, 8, 8, ~\n$ trans        <chr> \"auto(l5)\", \"manual(m5)\", \"manual(m6)\", \"auto(av)\", \"auto~\n$ drv          <chr> \"f\", \"f\", \"f\", \"f\", \"f\", \"f\", \"f\", \"4\", \"4\", \"4\", \"4\", \"4~\n$ cty          <int> 18, 21, 20, 21, 16, 18, 18, 18, 16, 20, 19, 15, 17, 17, 1~\n$ hwy          <int> 29, 29, 31, 30, 26, 26, 27, 26, 25, 28, 27, 25, 25, 25, 2~\n$ fl           <chr> \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p\", \"p~\n$ class        <chr> \"compact\", \"compact\", \"compact\", \"compact\", \"compact\", \"c~\n```\n:::\n\n```{.r .cell-code}\nsummary(mpg)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n manufacturer          model               displ            year     \n Length:234         Length:234         Min.   :1.600   Min.   :1999  \n Class :character   Class :character   1st Qu.:2.400   1st Qu.:1999  \n Mode  :character   Mode  :character   Median :3.300   Median :2004  \n                                       Mean   :3.472   Mean   :2004  \n                                       3rd Qu.:4.600   3rd Qu.:2008  \n                                       Max.   :7.000   Max.   :2008  \n      cyl           trans               drv                 cty       \n Min.   :4.000   Length:234         Length:234         Min.   : 9.00  \n 1st Qu.:4.000   Class :character   Class :character   1st Qu.:14.00  \n Median :6.000   Mode  :character   Mode  :character   Median :17.00  \n Mean   :5.889                                         Mean   :16.86  \n 3rd Qu.:8.000                                         3rd Qu.:19.00  \n Max.   :8.000                                         Max.   :35.00  \n      hwy             fl               class          \n Min.   :12.00   Length:234         Length:234        \n 1st Qu.:18.00   Class :character   Class :character  \n Median :24.00   Mode  :character   Mode  :character  \n Mean   :23.44                                        \n 3rd Qu.:27.00                                        \n Max.   :44.00                                        \n```\n:::\n:::\n\n\nNow, we plot the relationship between `automobile class` and `drive type` (front-wheel, rear-wheel, or 4-wheel drive) for the automobiles using stacked, or segmented bar charts.\n\n#### Stacked bar chart\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nggplot(mpg, \n       aes(x = class, \n           fill = drv)) + \n  geom_bar(position = \"stack\")+\n  scale_fill_discrete(labels = c(\"4-wheel\", \"front-wheel\", \"rear-wheel\"))\n```\n\n::: {.cell-output-display}\n![Stacked Bar Chart of Automobiles](lecture2_files/figure-html/fig-stackbar-1.png){#fig-stackbar width=672}\n:::\n:::\n\n\nAccording to the @fig-stackbar, the most common vehicle is the SUV. All 2seater cars are rear wheel drive, and most of the SUVs are 4-wheel drive. All minivans are front wheel drive, and all pickups are four wheel.\n\n#### Segmented bar plot\n\nThis is also a stacked bar plot where each bar represents 100 percent.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nplotdata <- mpg %>%\n  group_by(class, drv) %>%\n  summarize(n = n()) %>% \n  mutate(pct = n/sum(n),\n         lbl = scales::percent(pct))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'class'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nggplot(plotdata, \n       aes(x = factor(class,\n                      levels = c(\"2seater\", \"subcompact\", \n                                 \"compact\", \"midsize\", \n                                 \"minivan\", \"suv\", \"pickup\")),\n           y = pct,\n           fill = factor(drv, \n                         levels = c(\"f\", \"r\", \"4\"),\n                         labels = c(\"front-wheel\", \n                                    \"rear-wheel\", \n                                    \"4-wheel\")))) + \ngeom_bar(stat = \"identity\",\n           position = \"fill\") +\n  scale_y_continuous(breaks = seq(0, 1, .2)) +\n  geom_text(aes(label = lbl), \n            size = 3, \n            position = position_stack(vjust = 0.5)) +\n  scale_fill_brewer(palette = \"Set2\") +\n  labs(y = \"Percent\", \n       fill = \"Drive Train\",\n       x = \"Class\",\n       title = \"Automobile Drive by Class\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![Segmented Bar Chart of Automobiles](lecture2_files/figure-html/fig-segmentbar-1.png){#fig-segmentbar width=672}\n:::\n:::\n\n\nYou can easily change the options shown in the above @fig-segmentbar.\n\n## References {.unnumbered}\n",
    "supporting": [
      "lecture2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}